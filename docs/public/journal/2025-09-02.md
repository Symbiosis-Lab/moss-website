# The Orchestration Insight

## The Problem We Faced

Building a template and theme system for moss felt overwhelming. Should we create our own template language? Reimplement Jekyll's object model? Build a custom SSG from scratch? Each path demanded months of work while potentially recreating what already works well.

More fundamentally: users love existing themes. Jekyll has 300+ beautiful options. Hugo has high-quality, fast themes. But accessing them meant learning new tools, folder structures, and workflows.

## What We Tried

We researched extensively—liquid-rust compatibility, theme ecosystem sizes, Hugo vs Jekyll architectures. Initially, we planned to reimplement Jekyll's template engine for compatibility. This felt like the "proper" way to support themes.

But something nagged at us. We were planning to spend months reimplementing what Jekyll already does perfectly.

## The Insight That Changed Everything

**moss shouldn't compete with SSGs—it should complete them.**

This shifted our entire architectural thinking:
- Don't reimplement Jekyll; orchestrate it
- Don't recreate themes; enable existing ones
- Don't force folder structures; adapt any structure

The user journey became theme-first: see a beautiful Jekyll theme → moss downloads Jekyll automatically → your content + chosen theme = published website.

## Technical Breakthrough

Two key innovations emerged:

**Virtual Filesystem Adaptation**: Your files stay exactly where you want them. moss creates a temporary SSG-compatible structure in `.moss/build/` using symlinks, runs the SSG against that, then cleans up. Users never see SSG folder requirements.

**Post-Build Social Layer**: Instead of building social features into our SSG, we inject Lichen.js into the final HTML output. Works with any SSG—Jekyll, Hugo, Zola, our own minimal engine.

## Why This Matters

This architecture respects the entire ecosystem while solving real problems:

1. **Theme Access**: Instant access to 1000+ themes across all SSGs
2. **Zero Learning Curve**: Users keep their folder structure and workflow  
3. **Progressive Enhancement**: Start with our minimal SSG, upgrade to themes when needed
4. **Universal Features**: Social features work on any static site
5. **Ecosystem Growth**: We contribute to existing tools rather than fragmenting

moss becomes the "Homebrew for static sites"—making powerful tools accessible without the complexity.

## Implementation Path

**Phase 1**: Build minimal SSG first (~200 lines, 1-2 MB) for instant value
**Phase 2**: Jekyll orchestration for largest theme ecosystem  
**Phase 3**: Hugo, Zola, Eleventy support
**Phase 4**: Universal theme marketplace

The architecture scales from "right-click to publish instantly" to "access any theme from any SSG" without breaking the core simplicity.

## The Forest View

This exemplifies moss's deeper philosophy: infrastructure that enables rather than constrains. Like moss in nature, we grow in overlooked spaces—the gap between "I want to publish" and "I need to learn Jekyll"—creating conditions for the whole ecosystem to flourish.

## Trade-offs Made

**Build vs Orchestrate**: We chose orchestration over reimplementation. This adds SSG download complexity but gains access to mature ecosystems.

**Minimal vs Feature-Rich**: Our minimal SSG sacrifices advanced features for instant accessibility. Users can upgrade to full SSGs when they need more power.

**Universal vs Optimized**: The virtual filesystem works with any SSG but may not optimize for specific SSG strengths. We prioritize compatibility over performance.

## Impact on Development

**Faster Time-to-Value**: Users see results immediately with the minimal SSG, then can explore themes without technical learning curves.

**Ecosystem Integration**: Instead of competing with existing tools, we amplify them. This should accelerate adoption by being complementary rather than disruptive.

**Architectural Flexibility**: The orchestration pattern allows moss to evolve with the SSG ecosystem rather than being locked to specific implementations.

## Future Implications

This architecture establishes moss as infrastructure rather than application. It enables rather than constrains, which should create sustainable competitive advantages through network effects.

The theme-first user journey transforms SSG selection from technical decision to aesthetic preference. This democratizes access to sophisticated publishing tools.

Users get immediate publishing power plus gradual access to the entire static site universe. SSG maintainers get new users. Theme creators get broader reach. Everyone wins when infrastructure does almost nothing, beautifully.

---

_Technical reference:_

- _[Implementation Plan](../internal/development/implementation.md) - Technical development phases and SSG orchestration strategy_