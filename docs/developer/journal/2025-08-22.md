# Development Journal - August 22, 2025

## Major Milestone: Core Publishing Pipeline Complete

**Achievement**: End-to-end "folder â†’ website" transformation implemented and tested

**What Works**:
- âœ… Right-click any folder â†’ "Publish to Web" (Finder integration)
- âœ… Automatic content analysis (markdown, images, project structure)  
- âœ… Beautiful HTML generation with moss-themed CSS
- âœ… Local HTTP server preview (`http://localhost:3000+`)
- âœ… Cross-platform browser opening
- âœ… Sites stored in `.moss/site/` (git-ignored)

**Demo**: `test-content/simple-blog/` â†’ Complete static website in seconds

## Key Implementation Insights

### Local Preview Architecture Decision

**Problem**: `file://` URLs cause CORS restrictions and don't match deployment behavior

**Solution**: Axum + tower-http embedded server
- Real HTTP server behavior 
- Automatic port detection (3000+)
- Cross-platform browser opening
- ~50 lines of code

### Deep Link Development Limitations

**Issue**: `moss://` protocol registration only works for installed apps on macOS

**Workarounds**: 
- Test button for development: `ðŸ§ª Test Publish`
- Build and install for full testing: `npm run tauri build` â†’ install .app

### Testing Strategy Evolution  

**Removed**: 17 useless tests testing hardcoded values and browser APIs
**Kept**: 4 essential tests validating core business logic
**Key principle**: Test behavior, not implementation

### Output Directory Strategy

**Solution**: Co-locate generated sites with source in `.moss/site/`
- Discoverable and persistent
- Standard pattern like `.next`, `dist/`
- Git-ignored but accessible