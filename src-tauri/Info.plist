<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>LSUIElement</key>
    <true/>

    <!-- NSServices Configuration for Context Menu Integration -->
    <!-- Note: NO NSIconName key = appears at TOP LEVEL of context menu -->
    <key>NSServices</key>
    <array>
        <dict>
            <!-- Menu item name that appears in Finder's context menu -->
            <key>NSMenuItem</key>
            <dict>
                <key>default</key>
                <string>Publish</string>
            </dict>

            <!-- Objective-C method selector to call in our service handler -->
            <!-- SHORT form without colons - full selector in Rust code -->
            <key>NSMessage</key>
            <string>publishFolder</string>

            <!-- Application that provides this service -->
            <key>NSPortName</key>
            <string>moss</string>

            <!-- Restrict service to appear only in Finder -->
            <key>NSRequiredContext</key>
            <dict>
                <key>NSApplicationIdentifier</key>
                <string>com.apple.finder</string>
            </dict>

            <!-- Only show service when folder is selected -->
            <key>NSSendFileTypes</key>
            <array>
                <string>public.folder</string>
            </array>
        </dict>
    </array>
</dict>
</plist>