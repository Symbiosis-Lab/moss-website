# Dual Paths

Development workflows and user workflows have different constraints. Today we served both.

## The Problem

macOS only recognizes URL schemes like `moss://` for installed applications. During development with `cargo run`, the app isn't installed, so our beautiful right-click integration was untestable.

This created friction: every time we changed publishing logic, we had to build the app, install it, then test. Slow feedback loops kill momentum.

## The Solution

We added a "Publish..." menu item to the system tray. Click it, pick a folder, same pipeline runs. The folder picker remembers your last selection - small convenience, big impact on development speed.

Now moss has two entry points:

- **Production**: Right-click folder → "Publish" (zero configuration)
- **Development**: Menu bar → "Publish..." (works immediately)

Both trigger identical processing. The difference is only in how you start.

## Key Discoveries

**Tauri resource bundling**: Resources live at `Contents/Resources/_up_/resources/` in production, not the expected `Contents/Resources/`. We detect both paths now.

**Context menu placement**: Removing `NSIconName` from Info.plist moves the service from "Quick Actions" submenu to main context menu. One property, one saved click.

**Dialog integration**: Tauri's dialog plugin is callback-based while our pipeline is async. A tokio channel bridges the gap cleanly.

## What This Means

Phase 0 is complete. moss can now:

- Transform any folder into a website
- Work for both developers and end users
- Install without configuration
- Remember preferences

This kind of dual-path design might become a pattern. Serve the ideal user experience, but provide escape hatches for edge cases. Don't make everyone pay for complexity that only some need.

---

_Technical references:_

- _[Tauri Dialog Plugin](https://v2.tauri.app/plugin/dialog/) - Native file dialogs with async integration_
- _[Tauri Resource Bundling](https://v2.tauri.app/concept/resources/) - App resource path resolution_
